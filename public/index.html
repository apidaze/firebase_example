<!--
To run this example locally, you will need to replace 'YOURAPPKEY' with a valid API key from
your developer account at APIdaze, see https://developers.apidaze.io
Then cd to this directory, and expose this page to HTTP, example in PHP :
php -S localhost:8001
-->
<html>
<head>
  <script src="https://www.gstatic.com/firebasejs/4.2.0/firebase.js"></script>

  <!-- Change this <script/> section if you want to deploy to your own Firebase app -->
  <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyB_fHzr4KRg8S68VMiBHZR-rM3EtGfkuLY",
      authDomain: "apidaze-example.firebaseapp.com",
      databaseURL: "https://apidaze-example.firebaseio.com",
      projectId: "apidaze-example",
      storageBucket: "apidaze-example.appspot.com",
      messagingSenderId: "191163091250"
    };
    firebase.initializeApp(config);
  </script>

  <script src="//code.jquery.com/jquery-1.9.1.min.js"></script>
  <script src="//api4.apidaze.io/javascript/releases/APIdaze-1.2-dev.js"></script>
  <script src="//js.pusher.com/2.2/pusher.min.js" type="text/javascript"></script>
  <script src="./app.js"></script>
</head>
<body>
  <h3>Instructions</h3>
  <div id="instructionsSectionId">
    Make sure to have the following database attributes set in Firebase :
    <code>
      <ul style="list-style-type: none">
        <li><b>apikey</b> (your APIdaze API key), mandatory</li>
        <li><b>number</b> (a phone number provided by APIdaze), optional</li>
      </ul>
    </code>
  </div>
  <h3>Firebase database</h3>
  <code>
    <ul style="list-style-type: none">
      <li><b>APIdaze API key</b> : <span id="apiKeyId"></span></li>
      <li><b>Active number</b> : <span id="activeNumberId"></span></li>
    </ul>
  </code>
  <div id="callActionsSectionId" style="display: none">
    <div>
      <h3>Place a call</h3>
      <table border="0">
        <tr>
          <td style="width: 150px">
            <input type="text" id="number_to_call" placeholder="E.g. : 33123456789"/>
          </td>
          <td>
            <input id="call" type="button" disabled="true" style="width: 90px" value="Loading..." />
          </td>
          <td>
            <input id="hangup" type="button" disabled="true" style="width: 90px" value="Hangup" />
          </td>
        </tr>
      </table>
    </div>
    <div>
      <h3>Incoming calls to +33170567760</h3>
      <table border="0">
        <tr>
          <td style="width: 150px">
            <div id="call_to_answer"></div>
          </td>
          <td>
            <input id="answer" type="button" disabled="true" style="width: 90px" value="Answer" />
          </td>
          <td>
            <input id="hangup-in" type="button" disabled="true" style="width: 90px" value="Hangup" />
          </td>
        </tr>
      </table>
    </div>
    <div>
      <h3>Conference</h3>
      <table border="0">
        <tr>
          <td style="width: 150px">
            <div id="my_status_inroom"></div>
          </td>
          <td>
            <input id="joinroom" type="button" style="width: 90px" value="Join" class="kick_button" />
          </td>
        </tr>
        <tr id="invite_number_to_conference" >
          <td style="width: 150px">
            <input type="text" placeholder="E.g. : 33123456789" disabled=true/>
          </td>
          <td>
            <input type="button" style="width: 90px" value="Invite phone" disabled=true/>
          </td>
        </tr>
      </table>
      <table id="members_in_room_id">
        <tbody>
        </tbody>
      </table>
    </div>
  </div>
</body>
</html>
